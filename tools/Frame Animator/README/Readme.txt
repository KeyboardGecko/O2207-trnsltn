Описание и функции программы Frame Animator 2.70

  Программа предназначена для создания однофреймовых и мултифреймовых (анимированных) файлов графики FRM (Fallout) на основе одного или нескольких BMP-файлов, GIF-файлов (в том числе анимированных GIF-файлов) и PNG-файлов. Имеется возможность компоновать и генерировать мультинаправленные FRM-файлы (в том числе вида FR0-FR5).

Прочие возможности программы:

  - Поддержка отдельной коллекции кадров для каждого из шести возможных направлений, используемых для создания мультинаправленных FRM-файлов;
  - Загрузка одного или нескольких BMP-файлов в выбранную коллекцию;
  - Добавление одного или нескольких новых кадров в выбранную коллекцию или удаление одного или нескольких кадров из выбранной коллекции;
  - Переупорядочивание кадров внутри выбранной коллекции;
  - Возможность задания смещения логического центра для каждого из шести возможных направлений генерируемого FRM-файла (необходимо для корректной усадки изображения в Fallout на корневой гекс);
  - Возможность задания смещений отдельных кадров внутри коллекции (необходимо для корректного воспроизведения плавной анимации двигающихся персонажей);
  - Функция автоматической подстройки смещения первого кадра в коллекции в зависимости от направления, характеризующего выбранную коллекцию;
  - Режим автоподрезки кадра по фоновому цвету (фоновый цвет - цвет, который в FRM-файле имеет индекс 0 и является прозрачным);
  - Индексирование цветов исходных BMP-кадров по палитре, заданной по умолчанию (Default.act) или по пользовательской палитре.
  - Несколько режимов задания фонового цвета:
      а) Автоматический (значение цвета, который должен быть проиндексирован, как фоновый, извлекается из самого левого верхнего пикселя текущего BMP-кадра);
      б) По цвету загруженной палитры (палитры по умолчанию или пользовательской), имеющему индекс 0 (или, проще говоря, первому цвету в палитре);
      в) Ручное задание фонового цвета путем указания образца цвета непосредственно на изображении BMP-кадра или при помощи стандартного цветового диалога выбора цвета (вызывается щелчком курсора мыши на прямоугольнике отображения цветового образца);
  - Возможность выбора режима индексации:
      а) Режим по умолчанию;
      б) Режим расчета с учетом весовых коэффициентов; 
  - Возможность отображения сетки гексов и корневого гекса для точной юстировки смещений логического центра и смещений отдельных кадров генерируемого FRM-файла;
  - Возможность задания смещения логического центра FRM-файла или отдельного кадра в выбранной коллекции визуально при помощи мыши в окне отображения;
  - Возможность загрузки фонового изображения для предварительной оценки разрабатываемого FRM-файла (например, в качестве фонового изображения можно использовать скриншот из Fallout, отображающий то место в игре, где возможно, будет находиться объект или персонаж, для которого создается FRM-файл);
  - Возможность сохранять ссылки на BMP-кадры, входящие в коллекции, выполненные настройки и ссылки на сопутствующие файлы (палитру и фоновое изображение) в виде простого файла проекта.
  - Возможность чтения FRM-файлов (в том числе и вида FR0-FR5), как исходных данных для нового проекта (при сохранении такого проекта программа предложит сохранить входящие в коллекции кадры в виде BMP-файлов на жестком диске).

Дополнительные возможности и нововведения Frame Animator 2.01

  - При сохранении открытого FRM-файла, как проекта, входящие в анимацию кадры записываются, как 24-bpp BMP-файлы в ту же директорию, куда записывается сохраняемый FPR-проект;
  - Кнопка активации инструмента редактирования при помощи мыши базовых смещений текущей коллекции и смещений отдельных фреймов в текущей коллекции вынесена явным образом на панель инструментов в нижний левый угол интерфейса наряду с инструментом взятия образца цвета. По умолчанию инструмент редактирования смещений не активен и требует для активации явного выбора;
  - Дополнительно к базовой функциональности инструмента визуального редактирования смещений присутствует возможность редактирования смещений строго в соответствии с ориентацией текущей коллекции (режим активен, если во время редактирования удерживать кнопку Shift)
  - Для большинства функций введены горячие клавиши;
  - В меню Edit появилась функция Undo. Программа поддерживает буфер отката, в котором хранит последние 10 изменений базовых смещений или смещений конкретных фреймов, выполненных при помощи любой функции редактирования смещений. Функции New Project..., Open Project..., Add Frames..., Remove Frames, Frame Down и Frame Up очищают буфер отката. 
  - В меню View введена новая функция Ghost, позволяющая включить отображение в рабочем окне наряду с текущим фреймом текущей коллекции изображение второго фрейма, отстоящего на произвольное количество фреймов от текущего. Инкремент или декремент индекса фонового фрейма относительно индекса текущего фрейма задается через окно настроек (Edit/Options...) в поле Ghost(+/-). Данная функция применима в случае мультифреймовых проектов;
  - В меню File добавлена функция Automate..., которая позволяет автоматически выполнить операции конвертирования FRM -> FPR, FPR -> FRM сразу над несколькими FRM-файлами или FPR-проектами. Выполнение операции можно прервать, нажав кнопку Esc.

Добавлено в Frame Animator 2.5

  - Загрузка одного или нескольких простых или анимированных GIF-файлов в выбранную коллекцию (если входящие в состав анимированного GIF-файла кадры имеют смещения относительно общих габаритов изображения, то эти смещения корректно загружаются, как смещения соответствующих фреймов в FPR-проекте);
  - Независимый менеджмент (местоположение в коллекции, смещение, независимое удаление) каждого отдельного кадра, полученного из анимированного GIF-файла, как самостоятельного изображения в рамках текущего FPR-проекта;
  - Режим независимого смещения отдельного кадра, когда нижестоящие кадры остаются на месте, и режим наследования сдвига нижестоящими кадрами, при котором сохраняются смещения этих кадров относительно текущего кадра (все нижестоящие кадры смещаются вслед за текущим кадром);
  - Дополнительно к базовой функциональности инструмента визуального редактирования смещений присутствует возможность редактирования смещений кадров, нижестоящих за текущим кадром (режим активен, если во время редактирования удерживать кнопку Ctrl, что не запрещает также одновременно задействовать функцию диагонального смещения удержанием кнопки Shift);
  - В рамках функции автоматизированной обработки ('Automate') добавлена опция Init Base Offsets, позволяющая сбросить базовые смещения (FramesOffset[Direction]) в ноль.

Добавлено в Frame Animator 2.51
  - Функция 'Project As Template' заменена более гибкой функцией 'Execute Script', которая позволяет выполнять FAS-скипты, содержащие макрокоманды управления действиями программы
  - В рамках функции автоматизированной обработки ('Automate') реализована поддержка FAS-скриптов.
  - Реализована поддержка PAL-палитр Fallout
  - Добавлен новый режим дизеринга при создании FRM-файлов - 'Fallout', позволяющий кодировать цвета по индексной таблице загруженной PAL-палитры Fallout

Добавлено в Frame Animator 2.70
  - Появилась возможность читать файлы в формате PNG
  - При сохранении открытого FRM-файла в качестве FRM-проекта появилась возможность выбирать место размещения, базовое имя и формат (BMP,GIF или PNG) сохранения отдельных фрэймов, которые будут входить в проект
  - В рамках функции автоматизированной обработки (‘Automate’) реализована возможность выбора формата сохранения фрэймов (BMP, GIF или PNG) 

Функции

  File
   - New Project - создать новый FPR-проект;
   - Open Project... - открыть существующий FPR-проект или FRM-файл (*.FRM,*.FR0-*.FR5);
   - Execute Script... - запуск FAS-скрипта (*.FAS);
   - Save Project - сохранить изменения в текущем FPR-проекте;
   - Save Project As... - сохранить текущий FPR-проект под новым именем;
   - Create FRM... - генерация FRM-файла (в виде *.FRM или как пять файлов *.FR0-*.FR5  в случае мультинаправленного FRM-файла);
   - Automate... - пакетная обработка вида FPR -> FRM или FRM -> FPR;
   - Exit - выход из программы;
  Edit
   - Undo - позволяет отменить 10 последних изменен базовых смещений или смещений отдельных фреймов;
   - Frames Offset... - задание базового смещения коллекции выбранного направления;
   - Add Frames... - добавление в коллекцию кадров на основе GIF- и BMP-файлов;
   - Frame Down - переместить выбранный в коллекции кадр вниз;
   - Frame Up - переместить выбранный в коллекции кадр вверх;
   - Frame Offset... - задание смещения отдельного фрейма в выбранной коллекции; 
   - Remove Frames - удалить выбранные кадры из коллекции;
   - Load Pallete... - загрузить пользовательскую палитру (цветовые таблицы *.ACT или палитры Fallout *.PAL);
   - Options... - настройки;
      - Transparent Color - режимы задания фонового цвета;
         - Auto - автоматический режим;
         - From Pallete - режим извлечения цвета из текущей палитры;
         - Sample - режим ручного задания фонового цвета;
      - Frames Tune - флаги управления обработкой кадров;
         - Autocutting - режим автоподрезки;
         - Lock Offsets - флаг запрета изменения смещений отдельных кадров в коллекции;
         - Ghost(+/-) - инкримент или декремент индекса отображаемого фонового фрейма;
      - Advanced - дополнительные настройки;         
         - Dithering Method - метод индексации;
         - Action Frame - номер фрейма, на котором изображен пиковый момент удара в случае анимации удара рукой, удара ногой или удара холодным оружием, или также момент завершения броска в случае анимации бросания гранаты, копья, ножа и т.д.;
         - FPS - скорость воспроизведения анимации;
  View
   - Full Names - показывать полные пути и имена загруженных в текущую коллекцию BMP-кадров;
   - Background - показывать фоновое изображение;
   - Hexes - показывать сетку гексов;
   - Ghost - показывать фоновый фрейм;
   - Load Background... - загрузка фонового изображения;
  Pick Sample Color - активация режима взятия цветового образца;
  Move Frame/Frames - активация режима визуального редактирования смещений.

Исправлено в Frame Animator 2.01:

  - При сохранении открытого FRM-файла, как проекта, BMP-кадры пишутся в формате 24-bpp. Их можно открывать и редактировать в младших версиях Adobe Photoshop (v.3 и v.4).

Советы

  При использовании в качестве исходных изображений анимированных GIF-файлов (или GIF-файлов, содержащих несколько кадров) полезно помнить о двух вещах. Во-первых, когда анимированный GIF-файл загружается, каждый входящий в него кадр воспринимается программой, как самостоятельный фрейм. Первоначально все исходные кадры располагаются внутри текущей коллекции в том порядке, как они следовали в самом GIF-файле, и будут смещены относительно друг друга ровно также, как они располагались относительно друг друга в GIF-файле. Но в рамках FPR-проекта вам никто не мешает поменять кадры местами, отредактировать их смещения или вовсе удалить лишние кадры, оставив только нужные. При сохранении FPR-проекта в проект запишутся все выполненные настройки, и при последующей загрузке проекта все эти настройки будут восстановлены. Во-вторых, следует помнить, что если вы отредактировали исходный GIF-файл (удалили кадры, поменяли их местами, сместили или изменили их размеры или фоновый цвет), то после этого нет никакой гарантии, что FPR-проект, который ссылался на этот GIF-файл, загрузится корректно. Скорее всего, его придется пересобрать заново. 

  Если результирующий FRM-файл не удовлетворителен с точки зрения выполненной программой индексации цветов, то сделайте следующее:
  - Загрузите исходное BMP-изображение в Adobe Photoshop;
  - Переведите его в индексный режим, указав для индексации нужную палитру (если на диске нет этой палитры в варианте *.ACT, то создайте файл *.ACT для нужной вам палитры или используйте палитру Default.act, которая используется программой FrameAnimator);
  - Сохраните BMP-изображение;
  - Загрузите BMP-изображение в Frame Animator;
  - Загрузите ACT-палитру, использованную для индексации BMP-изображения, в Frame Animator;
  - Выполните генерацию FRM-файла;

  При установке смещений при помощи мыши в окне отображения кадров следует помнить, что когда в списке кадров текущей коллекции выбран первый кадр, то корректируется не смещение первого кадра, а базовое смещение для всего направления (также редактируется при помощи функции "Frames Offset"). Единственный способ задать смещение первого кадра в текущей коллекции - это выбрать первый кадр в списке кадров и вызвать функцию "Frame Offset" (в окне открывающегося диалогового окна доступна функция "Offset Wizard"). Для редактирования смещений прочих кадров текущей коллекции необходимо выбрать нужный кадр в списке кадров коллекции и убедиться, что в опциях не выставлен флажок "Lock Offsets". Редактировать смещения кадра можно как мышью, так и через функцию "Frame Offset". Изменение смещений любого кадра, кроме первого, никак не влияет на абсолютное местоположение нижеследующих кадров. Программа хранит не относительные смещения для каждого кадра, а абсолютные. Относительные смещения рассчитываются только в момент генерации FRM-файла с учетом выбранных режимов, опций и фонового цвета. Увы, но по этой же причине значения смещений текущего направления и выбранного кадра не отображаются в статусной строке и получить информацию о них можно только вызвав функции "Frames Offset" и "Frame Offset" соответственно. "Lock Offsets" блокирует редактирование смещений всех кадров в коллекции, начиная со второго. Редактирование базовых смещений направления (смещений логического центра в случае однофреймового проекта) и смещений первого кадра в коллекции доступны всегда.

  Прежде чем загружать в программу FRM-файл, решите, какая палитра понадобится вам для корректного дешифрирования кодов цветов. Если в FRM-файле используются коды анимированных цветов, то при использовании палитры Default.act информация о них будет потеряна. Для таких FRM-файлов необходимо разработать специальную палитру, предусматривающую полный набор псевдоцветов, интерпретирующих коды анимированных цветов исходного FRM-файла и не совпадающих ни с одним из основных цветов палитры.
  Также следует упомянуть, что при открытии FRM-файла фоновый цвет извлекается из установленной по умолчанию или специально указанной палитры (программа автоматически устанавливает режим фонового цвета по палитре). В палитре Deafault.act фоновый цвет (цвет по индексу 0) задан, как чистый синий 0x0000FF. Если вы используете для дешифрирования FRM-файла свою палитру, то убедитесь, что самый первый цвет в ней не совпадает ни с одним другим цветом в палитре.

  Если вам необходимо создать статичный однокадровый FRM-файл, то исходное BMP-изображение необходимо загрузить в самую первую коллекцию (направление North East). Аналогично следует поступить, если вы хотите создать однонаправленный мультикадровый FRM-файл. Если же вы создаете мультинаправленный FRM-файл, то вы обязаны загрузить в каждую из шести коллекций одинаковое число кадров.

  Для ускорения работы с проектами вы можете связать файлы с расширением  *.FPR с программой FrameAnimator.exe. Тогда программа будет автоматически загружаться и открывать выбранный проект.

 Если результаты работы программы не удовлетворительны, или программа работает с ошибками - уведомите об этом автора (e-mail jochua@mail.ru).
